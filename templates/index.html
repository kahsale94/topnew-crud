<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Sistema TopNew</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../static/styles.css">
</head>

<body>

    <div id="toast" class="toast hidden"></div>

    <!-- ================= HEADER ================= -->

    <header class="topbar">
        <h1>Sistema TopNew</h1>

        <div class="user-menu">
            <button id="user-btn" class="user-btn">
                Usuário ▾
            </button>

            <div id="user-dropdown" class="user-dropdown hidden">
                <div id="user-email" class="user-email"></div>
                <hr>
                <button id="logout-btn" class="logout-btn">Sair</button>
            </div>
        </div>
    </header>

    <!-- ================= TABS ================= -->

    <nav class="tabs">
        <button class="tab active" data-tab="pedidos">Pedidos</button>
        <button class="tab" data-tab="clientes">Clientes</button>
        <button class="tab" data-tab="produtos">Produtos</button>
    </nav>

    <!-- ================= CONTEÚDO ================= -->

    <main class="container">

        <!-- ================= PEDIDOS ================= -->

        <section id="pedidos" class="page active">

            <div class="page-actions">
                <button class="btn primary" onclick="abrirFormulario('pedido')">+ Novo Pedido</button>
            </div>

            <!-- ================= NOVO PEDIDO ================= -->

            <div id="form-pedido" class="form-container hidden" style="width: 50%">
                <h2>Novo Pedido</h2>

                <div class="form-group">
                    <label>Cliente (nome)</label>
                    <select id="pedido-cliente" class="form-control select">
                        <option value="">Selecione</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Forma de Pagamento</label>
                    <select id="pedido-forma_pagamento" class="form-control select">
                        <option value="">Selecione</option>
                    </select>
                </div>

                <div class="checkbox-group">
                    <label>Pago</label>
                    <input type="checkbox" id="pedido-pago">
                </div>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Produto</th>
                            <th>Quantidade</th>
                            <th>Valor Unitário</th>
                            <th>Total</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="itens-pedido-tbody"></tbody>
                </table>

                <div class="pedido-total" style="margin: 1%; text-align: right; margin-right: 8%;">
                    Total do pedido:
                    <strong id="pedido-total">R$ 0,00</strong>
                </div>

                <button onclick="fecharFormulario('pedido')" type="button" class="btn cancel">
                    Cancelar Pedido
                </button>

                <button id="btn-add-item" type="button" class="btn secondary">
                    + Adicionar Produto
                </button>

                <button id="btn-salvar-pedido" type="button" class="btn primary">
                    Salvar Pedido
                </button>
            </div>

            <div class="page-header">
                <H1>Pedidos</H1>

                <button class="btn secondary icon-btn" onclick="carregarPedidos(true)" title="Recarregar Pedidos">
                    <img src="../static/icons/recarregar.png" alt="Recarregar">
                </button>
            </div>

            <!-- ================= TABELA ================= -->

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nº</th>
                            <th>Cliente</th>
                            <th>Data</th>
                            <th>Valor Total</th>
                            <th>Forma de Pagamento</th>
                            <th>Pago</th>
                            <th>Itens</th>
                            <th>Ações</th>
                        </tr>
                    </thead>

                    <tbody id="pedidos-tbody">
                        <!-- GET /pedidos -->
                    </tbody>
                </table>
            </div>

        </section>

        <!-- ================= CLIENTES ================= -->

        <section id="clientes" class="page">

            <div class="page-actions">
                <button class="btn primary" onclick="abrirFormulario('cliente')">+ Novo Cliente</button>
            </div>

            <!-- ================= NOVO CLIENTE ================= -->

            <div id="form-cliente" class="form-container hidden">
                <h2>Novo Cliente</h2>

                <div class="form-group">
                    <label>Nome</label>
                    <input id="cliente-nome" type="text">
                </div>

                <div class="form-group">
                    <label>Telefone</label>
                    <input id="cliente-telefone" type="text">
                </div>

                <div class="form-group">
                    <label>Endereço</label>
                    <input id="cliente-endereco" type="endereco">
                </div>

                <button onclick="fecharFormulario('cliente')" type="button" class="btn cancel">
                    Cancelar
                </button>

                <button id="btn-salvar-cliente" class="btn primary">
                    Salvar Cliente
                </button>
            </div>

            <div class="page-header">
                <H1>Clientes</H1>

                <button class="btn secondary icon-btn" onclick="carregarClientes(true)" title="Recarregar Clientes">
                    <img src="../static/icons/recarregar.png" alt="Recarregar">
                </button>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nº</th>
                            <th>Nome</th>
                            <th>Telefone</th>
                            <th>Endereço</th>
                            <th>Ações</th>
                        </tr>
                    </thead>

                    <tbody id="clientes-tbody">
                        <!-- GET /clientes -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ================= PRODUTOS ================= -->

        <section id="produtos" class="page">

            <div class="page-actions">
                <button class="btn primary" onclick="abrirFormulario('produto')">+ Novo Produto</button>
            </div>

            <!-- ================= NOVO PRODUTO ================= -->

            <div id="form-produto" class="form-container hidden">
                <h2>Novo Produto</h2>

                <div class="form-group">
                    <label>Nome</label>
                    <input id="produto-nome" type="text">
                </div>

                <div class="form-group">
                    <label>Descrição</label>
                    <input id="produto-descricao" type="text">
                </div>

                <div class="form-group">
                    <label>Valor de Compra</label>
                    <input id="produto-valor_compra" type="number" step="0.01">
                </div>

                <div class="form-group">
                    <label>Valor de Venda</label>
                    <input id="produto-valor_venda" type="number" step="0.01">
                </div>

                <div class="form-group">
                    <label>Categoria</label>
                    <input id="produto-categoria" type="text">
                </div>

                <button onclick="fecharFormulario('produto')" type="button" class="btn cancel">
                    Cancelar
                </button>

                <button id="btn-salvar-produto" class="btn primary">
                    Salvar Produto
                </button>
            </div>

            <div class="page-header">
                <H1>Produtos</H1>

                <button class="btn secondary icon-btn" onclick="carregarProdutos(true)" title="Recarregar Produtos">
                    <img src="../static/icons/recarregar.png" alt="Recarregar">
                </button>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nº</th>
                            <th>Nome</th>
                            <th>Descrição</th>
                            <th>Valor de Compra</th>
                            <th>Valor de Venda</th>
                            <th>Categoria</th>
                            <th>Ações</th>
                        </tr>
                    </thead>

                    <tbody id="produtos-tbody">
                        <!-- GET /produtos -->
                    </tbody>
            </div>

        </section>

    </main>

    <script src="../static/config.js"></script>
    <script src="../static/api.js"></script>
    <script src="../static/auth.js"></script>
    <script src="../static/guard.js"></script>
    <script>
        verificarAuth();
    </script>
    <script src="../static/app.js"></script>

    
</body>

</html>