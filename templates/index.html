<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cadastro</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }

        button {
            margin-top: 10px;
            padding: 10px 15px;
            cursor: pointer;
        }

        form {
            margin-top: 15px;
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ccc;
            width: 400px;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input {
            width: 100%;
            padding: 5px;
        }

        .hidden {
            display: none;
        }
    </style>

    <script>
        function toggleForm(id) {
            document.getElementById(id).classList.toggle("hidden");
        }

        async function enviarJSON(event, url, campos) {
            event.preventDefault();

            const data = {};
            campos.forEach(campo => {
                data[campo] = event.target[campo].value;
            });

            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            });

            if (!response.ok) {
                const erro = await response.json();
                alert("Erro: " + JSON.stringify(erro));
                return;
            }

            alert("Cadastro realizado com sucesso!");
            event.target.reset();
        }
    </script>
</head>
<body>

<h1>Sistema de Cadastro</h1>

<!-- CLIENTE -->
<button onclick="toggleForm('form-cliente')">Criar Cliente</button>

<form id="form-cliente"
      class="hidden"
      onsubmit="enviarJSON(event, '/clientes/clientes', ['nome','idade','telefone','email'])">

    <h3>Cadastro de Cliente</h3>

    <label>Nome</label>
    <input type="text" name="nome" required>

    <label>Idade</label>
    <input type="number" name="idade" required>

    <label>Telefone</label>
    <input type="text" name="telefone" required>

    <label>Email</label>
    <input type="email" name="email" required>

    <button type="submit">Salvar Cliente</button>
</form>

<!-- PRODUTO -->
<button onclick="toggleForm('form-produto')">Criar Produto</button>

<form id="form-produto"
      class="hidden"
      onsubmit="enviarJSON(event, '/produtos/produtos', ['nome','descricao','valor','categoria'])">

    <h3>Cadastro de Produto</h3>

    <label>Nome</label>
    <input type="text" name="nome" required>

    <label>Descrição</label>
    <input type="text" name="descricao" required>

    <label>Valor</label>
    <input type="number" step="0.01" name="valor" required>

    <label>Categoria</label>
    <input type="text" name="categoria" required>

    <button type="submit">Salvar Produto</button>
</form>

<!-- PEDIDO -->
<button onclick="toggleForm('form-pedido')">Criar Pedido</button>

<form id="form-pedido"
      class="hidden"
      onsubmit="enviarJSON(event, '/pedidos/pedidos', ['valor','produtos_nomes','cliente_nome'])">

    <h3>Cadastro de Pedido</h3>

    <label>Nome do Cliente</label>
    <input type="text" name="cliente_nome" required>

    <label>Produto</label>
    <input type="text" name="produtos_nomes" required>

    <label>Valor</label>
    <input type="number" step="0.01" name="valor" required>

    <button type="submit">Salvar Pedido</button>
</form>

</body>
</html>